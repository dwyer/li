(let ()
  (import (li list))
  (import (li stack))

  (let ((s (make-stack))
        (xs (iota 100)))
    (for-each (lambda (x) (stack-push! s x)) xs)
    (assert (equal? (reverse xs) (stack->list s)))
    (for-each (lambda (x)
                (assert (= x (stack-pop! s))))
              (reverse xs))) )
